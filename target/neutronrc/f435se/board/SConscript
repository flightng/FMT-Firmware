import os
from building import *
import rtconfig 
Import('RTT_ROOT')
Import('SDK_LIB')

cwd = GetCurrentDir()

src = Glob('*.c')

inc = [cwd]

startup_path_prefix = SDK_LIB

if rtconfig.PLATFORM in ['gcc']:
    src += [startup_path_prefix + '/AT32F435_437_Firmware_Library/cmsis/cm4/device_support/startup/gcc/startup_at32f435_437.s']
elif rtconfig.PLATFORM in ['armcc', 'armclang']:
    src += [startup_path_prefix + '/AT32F435_437_Firmware_Library/cmsis/cm4/device_support/startup/mdk/startup_at32f435_437.s']
elif rtconfig.PLATFORM in ['iccarm']:
    src += [startup_path_prefix + '/AT32F435_437_Firmware_Library/cmsis/cm4/device_support/startup/iar/startup_at32f435_437.s']

#NEUTRONRCF435SE MCU TYPE ,CHANGE THIS WHEN USE OTHER MCUS
CPPDEFINES = ['AT32F437VMT7']

group = DefineGroup('Board', src, depend = [''], CPPPATH = inc,CPPDEFINES = CPPDEFINES)

Return('group')